(()=>{"use strict";var e,a={597:(e,a,i)=>{var c={};i.r(c),i.d(c,{metadata:()=>l,settings:()=>g});const l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"cabfm/campaign-archive","title":"Campaign Archive","category":"widgets","description":"Display newsletters from a Mailchimp campaign.","keywords":["mailchimp","feed","archive","campaign","newsletter"],"textdomain":"campaign-archive-block-for-mailchimp","attributes":{"itemsToShow":{"type":"number","default":5},"campaignTitle":{"type":"string","default":"subject"},"displaySender":{"type":"boolean","default":false},"displayDate":{"type":"boolean","default":false},"displayTime":{"type":"boolean","default":false}},"supports":{"align":true,"html":false},"editorStyle":"campaign-archive-block-for-mailchimp-editor","editorScript":"campaign-archive-block-for-mailchimp-editor","style":"campaign-archive-block-for-mailchimp","script":"campaign-archive-block-for-mailchimp"}'),n=window.wp.i18n,t=window.wp.keycodes,o=window.wp.blockEditor,r=window.wp.components,s=window.wp.element,m=window.wp.apiFetch;var p=i.n(m);const h=window.ReactJSXRuntime,d=e=>{const{attributes:a,setAttributes:i,apiKeyObject:c,setApiKeyObject:l}=e,{itemsToShow:m,campaignTitle:d,displaySender:v,displayDate:b,displayTime:_}=a,[u,g]=(0,s.useState)(c.key);(0,s.useEffect)((()=>{p()({path:"/wp/v2/settings"}).then((e=>{l({key:e.cabfm_api_key,valid:e.cabfm_api_credentials_validation_result,message:e.cabfm_api_credentials_validation_message,account_name:e.cabfm_api_credentials_account_name})}))}),[]);const f=()=>{k(u.trim())},k=e=>{p()({data:{cabfm_api_key:e},method:"POST",path:"/wp/v2/settings"}).then((e=>{l({key:e.cabfm_api_key,valid:e.cabfm_api_credentials_validation_result,message:e.cabfm_api_credentials_validation_message,account_name:e.cabfm_api_credentials_account_name})}))};return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(o.InspectorControls,{children:[c.valid&&(0,h.jsxs)(r.PanelBody,{initialOpen:c.valid,title:(0,n.__)("Settings","campaign-archive-block-for-mailchimp"),children:[(0,h.jsx)(r.RangeControl,{label:(0,n.__)("Number of items","campaign-archive-block-for-mailchimp"),value:m,onChange:e=>i({itemsToShow:e}),min:1,max:100,required:!0}),(0,h.jsx)(r.SelectControl,{label:(0,n.__)("Campaign title","campaign-archive-block-for-mailchimp"),value:d,options:[{label:(0,n._x)("Subject","campaign-title","campaign-archive-block-for-mailchimp"),value:"subject"},{label:(0,n._x)("Title","campaign-title","campaign-archive-block-for-mailchimp"),value:"title"}],onChange:e=>i({campaignTitle:e})}),(0,h.jsx)(r.ToggleControl,{label:(0,n.__)("Display sender","campaign-archive-block-for-mailchimp"),checked:!!v,onChange:()=>i({displaySender:!v})}),(0,h.jsx)(r.ToggleControl,{label:(0,n.__)("Display date","campaign-archive-block-for-mailchimp"),checked:!!b,onChange:()=>i({displayDate:!b})}),b&&(0,h.jsx)(r.ToggleControl,{label:(0,n.__)("Display time","campaign-archive-block-for-mailchimp"),checked:!!_,onChange:()=>i({displayTime:!_})})]}),(0,h.jsxs)(r.PanelBody,{title:(0,n.__)("Mailchimp API key","campaign-archive-block-for-mailchimp"),children:[!c.valid&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{children:(0,n.__)("To use the Campaign Archive block on your site, you have to provide credentials for the Mailchimp API in the settings below.","campaign-archive-block-for-mailchimp")}),(0,h.jsxs)("p",{children:[(0,h.jsx)(r.ExternalLink,{href:"https://us1.admin.mailchimp.com/account/api/",children:(0,n.__)("Get an API key","campaign-archive-block-for-mailchimp")})," | ",(0,h.jsx)(r.ExternalLink,{href:"https://mailchimp.com/en/help/about-api-keys/",children:(0,n.__)("How to get a key?","campaign-archive-block-for-mailchimp")})]}),(0,h.jsx)(r.TextControl,{label:(0,n.__)("Mailchimp API key","campaign-archive-block-for-mailchimp"),hideLabelFromVision:"true",placeholder:(0,n.__)("Add Mailchimp API key…","campaign-archive-block-for-mailchimp"),onChange:e=>g(e),onKeyDown:({keyCode:e})=>(e=>{e===t.ENTER&&f()})(e),value:u}),""!==c.message&&!c.valid&&(0,h.jsx)("div",{className:"cabfm-credentials-validation-error",children:(0,h.jsx)("div",{className:"components-notice is-error",children:(0,h.jsx)("div",{className:"components-notice__content",children:(0,n.sprintf)(
// translators: the API error message.
// translators: the API error message.
(0,n.__)("There was an error connecting to your Mailchimp account: %s","campaign-archive-block-for-mailchimp"),c.message)})})}),(0,h.jsx)(r.Button,{disabled:""===u,isPrimary:!0,onClick:f,children:(0,n.__)("Save","campaign-archive-block-for-mailchimp")})]}),c.valid&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"cabfm-credentials-status",children:(0,h.jsx)("div",{className:"components-notice is-success",children:(0,h.jsx)("div",{className:"components-notice__content",children:(0,n.__)("You have been successfully connected to a Mailchimp account:","campaign-archive-block-for-mailchimp")})})}),(0,h.jsxs)("p",{className:"cabfm-acount-name-current",children:[(0,h.jsx)("b",{children:(0,n.__)("Account:","campaign-archive-block-for-mailchimp")}),(0,h.jsx)("br",{}),c.account_name]}),(0,h.jsxs)("p",{className:"cabfm-api-key-current",children:[(0,h.jsx)("b",{children:(0,n.__)("API key:","campaign-archive-block-for-mailchimp")}),(0,h.jsx)("br",{}),c.key]}),(0,h.jsx)(r.Button,{className:"components-button is-destructive",disabled:!c.key,isSecondary:!0,onClick:()=>{k("")},children:(0,n.__)("Remove API key","campaign-archive-block-for-mailchimp")})]})]})]})})},v=window.wp.serverSideRender;var b=i.n(v);const{SVG:_,Path:u}=wp.components,g={icon:(0,h.jsxs)(_,{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 42.813 44.851",children:[(0,h.jsx)(u,{fill:"#000","fill-rule":"evenodd",d:"M32.213 21.143h1v-1.6c-.2-1.1-.5-1.8-1.2-1.7-.6.1-.6 1-.4 2 .1.6.3 1.1.6 1.4zm-5.4.9c.4.1.7.3.8.2v-.4c-.3-.4-.7-.7-1.2-1-1-.4-2.2-.2-3.1.4-.3.2-.6.5-.6.7l.2.1c.2 0 1.1-.4 2.1-.4.7 0 1.3.2 1.8.4zm-.9.5c-.6 0-1 .2-1.2.4l-.2.5v.1l.5-.1c.8-.3 1.4-.3 2-.2h.4v-.2c-.1-.3-.7-.6-1.5-.5zm4.5 1.8c.4.2.8.2 1-.1 0-.3-.1-.7-.5-.9-.4-.2-.9-.1-1 .2-.1.3 0 .6.5.8zm2.6-2.2c-.4 0-.7.4-.7.8 0 .5.3.8.6.8s.6-.3.6-.8c0-.4-.2-.8-.6-.8zm-21.9 7.9h-.6a.7.7 0 0 1-.6-.2v-1l.1-.1c.3-.6.7-1.6.2-2.5-.3-.7-1-1.1-1.7-1.2-.7-.1-1.4.2-1.8.7-.7.7-.9 1.8-.7 2.2l.2.2c.1 0 .3-.1.4-.4v-.2l.3-.7c.2-.3.5-.5.8-.6.4 0 .7 0 1 .2.5.3.7 1 .5 1.5-.1.3-.3 1-.2 1.4 0 1 .6 1.3 1.2 1.4.5 0 .9-.3 1-.5v-.3z","clip-rule":"evenodd"}),(0,h.jsx)(u,{fill:"#000","fill-rule":"evenodd",d:"M16.013 12.543a20 20 0 0 1 5.7-4.5h.1l-.5 1.3c0 .1 0 .2.1.1 1.2-.8 3.2-1.6 5-1.7v.1l-.8.8.1.1c1.2 0 3 .5 4.1 1v.3a17.1 17.1 0 0 0-13.6 2.5zm15.5 19.6v-.2s0-.1 0 0c0 0-3.7.4-7.1-.8.4-1.2 1.4-.8 2.9-.6 2.7.1 5-.3 6.9-.8a16 16 0 0 0 5.1-2.5c.6 1.1.7 2.4.7 2.4s.5 0 .8.2c.3.2.6.6.4 1.6-.3 2-1.2 3.6-2.6 5.1a13.4 13.4 0 0 1-5.2 3.2c-5.5 1.7-11-.2-12.8-4.3l-.3-1c-.8-2.7-.2-6 1.9-8l.2-.5c0-.1 0-.3-.2-.4-.7-1-3.1-2.8-2.6-6.1.3-2.4 2.4-4 4.4-4h.5l2.3.2c1.2 0 2.3-.1 3.5-1.1.5-.4.8-.7 1.4-.8h.5c.3 0 .6 0 .9.2 1 .7 1.1 2.3 1.2 3.5l.1 2.7c0 1.1.4 1.3 1 1.4l1 .3a6 6 0 0 1 2.6 1.3c.3.3.5.6.5.9.2 1.1-.9 2.5-3.7 3.8a19 19 0 0 1-10.1 1.4c-2-.3-3.2 2.3-2 4 .8 1.2 3 2 5 2 5 0 8.8-2.1 10.2-3.9l.1-.1v-.1c-1.2.7-6.3 3.8-11.8 2.9 0 0-.7-.1-1.3-.4-.5-.1-1.5-.6-1.6-1.6 4.4 1.3 7.2 0 7.2 0zm-24.2-10.4a5.9 5.9 0 0 0-3.8 2.4 10 10 0 0 1-1.5-1.6c-1.4-2.5 1.4-7.3 3.3-10 4.8-6.6 12.3-11.7 15.7-10.8.6.2 2.5 2.3 2.5 2.3s-3.5 1.9-6.7 4.5c-4.3 3.3-7.6 8-9.5 13.2zm2.5 11.4h-.7c-2.3 0-4.8-2.1-5-4.5-.3-2.7 1-4.8 3.6-5.3h1c1.4 0 3.4 1 3.9 4 .4 2.7-.3 5.3-2.8 5.8zm31.3-4.8-.3-1-.4-1c.7-1 .8-2 .7-2.6-.1-.6-.4-1.2-1-1.8a7.7 7.7 0 0 0-3.3-1.6l-.8-.2-.1-2.8c0-.6 0-1.5-.4-2.5-.3-1.2-1-2.3-1.7-3 2-2.1 3.4-4.5 3.4-6.5 0-4-4.9-5.1-10.9-2.7l-1.2.6-2.4-2.3c-6.7-5.9-28.2 17.6-21.4 23.2l1.5 1.4c-.4 1-.5 2.1-.4 3.3a7 7 0 0 0 6.8 6c2.7 6.1 8.8 9.8 16 10 7.6.2 14-3.3 16.7-9.6.2-.5.9-2.5.9-4.3 0-1.8-1-2.5-1.7-2.5z","clip-rule":"evenodd"})]}),edit:e=>{const a=(0,o.useBlockProps)(),{attributes:i}=e,[c,l]=(0,s.useState)({key:"",valid:!1,message:"",account_name:""});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d,{...e,apiKeyObject:c,setApiKeyObject:l}),(0,h.jsx)("div",{...a,children:(0,h.jsxs)(r.Disabled,{children:[c.valid&&(0,h.jsx)(b(),{block:"cabfm/campaign-archive",attributes:i,apiKeyObject:c}),!c.valid&&(0,h.jsx)("div",{className:"components-placeholder",children:(0,h.jsx)("div",{className:"notice notice-warning",children:(0,n.__)("To use the Campaign Archive block on your site, you have to provide credentials for the Mailchimp API in the block settings.","campaign-archive-block-for-mailchimp")})})]})})]})}},{registerBlockType:f}=wp.blocks;[c].forEach((e=>{if(!e)return;const{metadata:a,settings:i}=e;f(a,{...i})}))}},i={};function c(e){var l=i[e];if(void 0!==l)return l.exports;var n=i[e]={exports:{}};return a[e](n,n.exports,c),n.exports}c.m=a,e=[],c.O=(a,i,l,n)=>{if(!i){var t=1/0;for(m=0;m<e.length;m++){i=e[m][0],l=e[m][1],n=e[m][2];for(var o=!0,r=0;r<i.length;r++)(!1&n||t>=n)&&Object.keys(c.O).every((e=>c.O[e](i[r])))?i.splice(r--,1):(o=!1,n<t&&(t=n));if(o){e.splice(m--,1);var s=l();void 0!==s&&(a=s)}}return a}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[i,l,n]},c.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return c.d(a,{a}),a},c.d=(e,a)=>{for(var i in a)c.o(a,i)&&!c.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},c.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0,350:0};c.O.j=a=>0===e[a];var a=(a,i)=>{var l,n,t=i[0],o=i[1],r=i[2],s=0;if(t.some((a=>0!==e[a]))){for(l in o)c.o(o,l)&&(c.m[l]=o[l]);if(r)var m=r(c)}for(a&&a(i);s<t.length;s++)n=t[s],c.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return c.O(m)},i=self.webpackChunk_2ndkauboy_campaign_archive_block_for_mailchimp=self.webpackChunk_2ndkauboy_campaign_archive_block_for_mailchimp||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))})();var l=c.O(void 0,[350],(()=>c(597)));l=c.O(l)})();